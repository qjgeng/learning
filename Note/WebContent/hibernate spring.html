<html>
<head>
  <title>hibernate spring</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/220395 (en-US); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="481"/>
<h1>hibernate spring</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">@Entity<br>
@Table(name=&quot;h2_user&quot;)<br>
    <br>
@Id<br>
@GeneratedValue(strategy=GenerationType.SEQUENCE,generator=&quot;k_student_sequence&quot;)<br>
@SequenceGenerator(name=&quot;k_student_sequence&quot;,sequenceName=&quot;k_student_sequence&quot;,allocationSize=1)  </span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><br></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><br><br>
@Column(name=&quot;XXX&quot;)<br><br>
@ManyToOne(fetch=FetchType.LAZY)<br>
@JoinColumn(name=&quot;cid&quot;)<br><br>
@OneToMany(mappedBy=&quot;classroom&quot;,fetch=FetchType.LAZY)<br>
@LazyCollection(LazyCollectionOption.EXTRA)<br><br>
@OneToOne(fetch=FetchType.LAZY)<br>
@JoinColumn(name=&quot;pid&quot;)<br><br>
@OneToOne(mappedBy=&quot;person&quot;,fetch=FetchType.LAZY)<br><br><br>
@ManyToMany<br>
@JoinTable(name=&quot;h2_role_admin&quot;,joinColumns={@JoinColumn(name=&quot;rid&quot;)},inverseJoinColumns={@JoinColumn(name=&quot;aid&quot;)})</span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><br></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">&lt;many-to-one name=&quot;classroom&quot; column=&quot;cId&quot;/&gt;</span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><br></span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">&lt;set name=&quot;students&quot; inverse=&quot;true&quot; lazy=&quot;extra&quot;&gt;</span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">     &lt;key column=&quot;cId&quot;/&gt;</span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">     &lt;one-to-many class=&quot;Student&quot;/&gt;</span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">&lt;/set&gt;</span></div><div><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><br></span></div><div align="left" style="color: rgb(0, 0, 0); font-family: Tahoma;"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>SELECT stu FROM Student stu LEFT JOIN stu.classroom WHERE stu.classroom.id is null</u></span></font></span></div><div align="left"><div style="text-align: -webkit-auto;"><font><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">不用写on</span></font></div><div style="text-align: -webkit-auto;"><font><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><br></span></font></div><div style="text-align: -webkit-auto;"><div align="left"><font><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font color="#2A00FF" face="Consolas"><u>SELECT new org.zttc.itat.model.StudentDto(stu.id, stu.name, stu.sex, clz.name, sp.name) FROM Student stu INNER JOIN stu.classroom clz INNER JOIN clz.special sp&quot;</u></font></span></font></div><div align="left"><div style="text-align: -webkit-auto;"><font>Dto 写法</font></div><div style="text-align: -webkit-auto;"><font>------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</font></div><div style="text-align: -webkit-auto;"><font><br></font></div><div style="text-align: -webkit-auto;"><font>抓取策略</font></div><div style="text-align: -webkit-auto;"><div align="left"><font><font color="#008080" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">many-to-one</span></font> <font color="#7F007F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">name</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">=</span></font><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><i>&quot;classroom&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">column</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">=</span></font><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><i>&quot;cId&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">fetch</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">=</span></font><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><i>&quot;join&quot;</i></span></font><font color="#008080" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&gt;&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">many-to-one</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font color="#008080">&gt;</font> 会连接表，延迟加载失效，仅对load有效</span></font></font></div><div align="left"><div><font><font face="Consolas"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">可以在HQL中指定抓取</span></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><span style="border-collapse: separate; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">多的一方可以使用 <u>JOIN FETCH</u> 避免一次发多条sql</span></font></span></font></font></div><div align="left" style="color: rgb(0, 0, 0); font-family: Tahoma;"><font><font face="Consolas"><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u><br></u></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);">一的一方可以写subselect</span></font></font></font></div><div align="left"><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">@OneToMany</font><font face="Consolas">(fetch=FetchType.</font><font face="Consolas"><i>LAZY</i></font><font face="Consolas">,mappedBy=</font><font face="Consolas">&quot;classroom&quot;</font><font face="Consolas">)</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">@LazyCollection</font><font face="Consolas">(LazyCollectionOption.</font><font face="Consolas"><i>EXTRA</i></font><font face="Consolas">)</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">@Fetch</font><font face="Consolas">(FetchMode.</font><font face="Consolas"><i>SUBSELECT</i></font><font face="Consolas">)</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas"><br></font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas"><br></font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas"><br></font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">-------------------------------------------------------------------------------------------------------------------------</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">一级缓存 指session缓存 session关闭就清掉</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas"><br></font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">二级缓存 sessionfactory级别的缓存：</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas"><br></font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">hibernate并没有提供二级缓存组件，可以用echcache</font></span></font></font></font></div><div align="left" style="font-family: Tahoma;"><span style="font-family: Consolas;">1.加入echcache jar包（三个）</span></div><div align="left" style="font-family: Tahoma;"><div align="left"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">        </span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&lt;</span></font><font color="#A31515" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">classpathentry</span></font> <font color="#FF0000" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">kind</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b>=</b></span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;lib&quot;</span></font> <font color="#FF0000" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">path</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b>=</b></span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;lib/ehcache-core-2.4.3.jar&quot;</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">/</span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&gt;</span></font></font></span></font></font></font></div><div align="left"><font><font face="Consolas"><font face="Consolas"><font face="Consolas">        </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">classpathentry</font> <font color="#FF0000" face="Consolas">kind</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;lib&quot;</font> <font color="#FF0000" face="Consolas">path</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;lib/hibernate-ehcache-4.1.7.Final.jar&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></font></div><div align="left"><font><font face="Consolas"><font face="Consolas"><font face="Consolas">        </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">classpathentry</font> <font color="#FF0000" face="Consolas">kind</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;lib&quot;</font> <font color="#FF0000" face="Consolas">path</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;lib/slf4j-api-1.6.1.jar&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></font></div></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font face="Consolas">2.配置</font></span></font></font></font></div><div align="left"><div align="left"><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254);"><font color="#008080" face="Consolas"><font face="Consolas">  </font><font color="#3F5FBF" face="Consolas">&lt;!-- 二级缓存 --&gt;</font></font></span></font></font></font></div><div align="left"><div align="left"><font face="Consolas"><font face="Consolas"> </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">property</font> <font color="#7F007F" face="Consolas">name</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;hibernate.cache.use_second_level_cache&quot;</i></font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">true</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">property</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas"> </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">property</font> <font color="#7F007F" face="Consolas">name</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;hibernate.cache.provider_class&quot;</i></font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">net.sf.ehcache.hibernate.EhCacheProvider</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">property</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas"> </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">property</font> <font color="#7F007F" face="Consolas">name</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;hibernate.cache.region.factory_class&quot;</i></font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">org.hibernate.cache.ehcache.EhCacheRegionFactory</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">property</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas"> </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">property</font> <font color="#7F007F" face="Consolas">name</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;hibernate.cache.provider_configuration_file_resource_path&quot;</i></font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">ehcache.xml</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">property</font><font color="#008080" face="Consolas">&gt;</font></font></div></div><div align="left" style="font-family: Tahoma;"><font><font face="Consolas"><font face="Consolas"><br></font></font></font></div></div></div></div><div align="left"><div><font color="#2A00FF"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="font-family: Consolas; text-align: -webkit-left;">3.src下配置ehcache</span></span></font></div><div><font color="#2A00FF"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="font-family: Consolas; text-align: -webkit-left;"><br></span></span></font></div><div><a href="hibernate spring_files/ehcache.xml"><img src="hibernate spring_files/5371cf6a95714ff2b50e3a4a1e3871a7.png" alt="ehcache.xml"></a><font color="#2A00FF"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><span style="font-family: Consolas; text-align: -webkit-left;"><br></span></span></font></div><div>4.开启二级缓存</div><div>Student.hbm.xml</div><div align="left"><font color="#008080" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">cache</span></font> <font color="#7F007F" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">usage</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">=</span></font><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><i>&quot;read-only&quot;</i></span></font><font color="#008080" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">/&gt;</span></font></div><div align="left"><font color="#2A00FF"><font color="#646464" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">@Cache</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">(usage=CacheConcurrencyStrategy.</span></font><font color="#0000C0" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><i>READ_ONLY</i></span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">)</span></font></font></div><div><font face="Consolas">查询缓存 缓存id，针对hql</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">-------------------------------------------------------------------------------------------------------------------------</font></div><div><font face="Consolas">并发问题</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">更新丢失。</font></div><div><font face="Consolas">解决办法，加锁。</font></div><div><font face="Consolas">1.悲观锁</font></div><div align="left"><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">Student st = (Student)session.</span><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u><strike>get</strike></u></span><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>(Student.</u></span></font><font color="#7F0055" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b><u>class</u></b></span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>, 1, LockMode.</u></span><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u><strike>UPGRADE</strike></u></span><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>)</u></span><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">; //此时当这个学生没有更新完，其他更新的动作进不去了</span></font></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">2.乐观锁</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">private int version;</font></div><div><font face="Consolas"><strong style="font-weight: bold; color: rgb(0, 0, 0); font-family: Helvetica, Tahoma, Arial, sans-serif; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: 31.1875px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span>&lt;version column=&quot;version&quot; name=&quot;version&quot; type=&quot;java.lang.Integer&quot;/&gt;</span></strong></font></div><div><span style="font-family: Consolas;"><strong style="font-weight: bold; color: rgb(0, 0, 0); font-family: Helvetica, Tahoma, Arial, sans-serif; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: 31.1875px; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span>@version</span></strong></span></div><div><font face="Consolas">数据库加一个version字段每次update之后version递增。</font></div><div><font face="Consolas">每次更新前查询version匹配不上报错。</font></div><div><font face="Consolas">--------------------------------------------------------------------------------------------------------------------------</font></div><div><font face="Consolas">使用hibernate的最佳实践</font></div><div><font face="Consolas">1.尽量使用单向关联。</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">2.百万级别的大项目，使用hibernate</font></div><div><font face="Consolas">2.1不要用对象关联，宁可用冗余字段 （但是修改时，必须连冗余一起修改）</font></div><div><font face="Consolas">2.2查询数据直接使用sql，如果涉及缓存，自己定义缓存，不使用hibernate的缓存。</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">直接使用sql</font></div><div align="left"><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">List&lt;Student&gt; sLst =</span> <span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>(List&lt;Student&gt;)session.createSQLQuery(</u></span></font><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>&quot;SELECT * FROM x_student stu  WHERE stu.name like :name&quot;</u></span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>).addEntity(Student.</u></span></font><font color="#7F0055" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b><u>class</u></b></span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>).setParameter(</u></span></font><font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>&quot;name&quot;</u></span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>,</u></span></font> <font color="#2A00FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>&quot;%Terry%&quot;</u></span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><u>).list()</u></span><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">;</span></font></font></div><div align="left"><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><br></span></font></font></div><div align="left"><div align="left"><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><font face="Consolas">List&lt;StudentDto&gt; sLst = (List&lt;StudentDto&gt;) session</font></span></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">.createSQLQuery(</font></font></div><div align="left"><font face="Consolas"><font color="#2A00FF" face="Consolas">&quot;SELECT stu.name \&quot;sname\&quot;, clz.name \&quot;cname\&quot;, sp.name \&quot;spname\&quot; FROM x_student stu  LEFT JOIN x_classroom clz ON stu.cid = clz.id LEFT JOIN x_special sp ON clz.sId = sp.id WHERE stu.name like :name&quot;</font><font face="Consolas">)</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">.setResultTransformer(Transformers.<i>aliasToBean</i>(StudentDto.</font><font color="#7F0055" face="Consolas"><b>class</b></font><font face="Consolas">)).setParameter(</font><font color="#2A00FF" face="Consolas">&quot;name&quot;</font><font face="Consolas">,</font> <font color="#2A00FF" face="Consolas">&quot;%Terry%&quot;</font><font face="Consolas">).list();</font></font></div><div align="left"><font face="Consolas"><font face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">--------------------------------------------------------------------------------------------------------------</font></font></div></div><div><font face="Consolas">spring</font></div><div><font face="Consolas"><br></font></div><div align="left"><div align="left"><div align="left"><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">导入包 dist下所有包 + common-logging</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">建立beans.xml拷贝约束文件</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">最基本如下</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">spring 默认是单例模式</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">可以设</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean id=&quot;hello&quot; class=&quot;org.zttc.itat.spring.model.HelloWorld&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">constructor</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean id=&quot;hello&quot; class=&quot;org.zttc.itat.spring.model.HelloWorld&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean id=&quot;simpleService&quot; class=&quot;org.zttc.itat.spring.service.SimpleService&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;constructor-arg ref=&quot;hello&quot;&gt;&lt;/constructor-arg&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;constructor-arg value=&quot;geng&quot;&gt;&lt;/constructor-arg&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">映射一个list</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean id=&quot;defaultAdress&quot; class=&quot;org.zttc.itat.spring.model.Address&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;adressName&quot; value=&quot;5th Street, Sanjose, CA&quot;&gt;&lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;postcode&quot; value=&quot;123456&quot;&gt;&lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean id=&quot;defaultUser&quot; class=&quot;org.zttc.itat.spring.model.User&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;name&quot; value=&quot;Geng&quot;&gt;&lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;age&quot; value=&quot;31&quot;&gt;&lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;emailLst&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;list&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;qjgeng@gmail.com&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;qjgeng1@gmail.com&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;qjgeng2@gmail.com&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;/list&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;addressLst&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;list&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;ref bean=&quot;defaultAdress&quot;/&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;ref bean=&quot;defaultAdress2&quot;/&gt;  </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;/list&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">annotation</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   &lt;context:annotation-config/&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   &lt;context:component-scan base-package=&quot;org.zttc.itat.spring&quot;&gt;&lt;/context:component-scan&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/beans&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">constructor</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Component(&quot;simpleService&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Scope(&quot;prototype&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public class SimpleService {  </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        private HelloWorld hw;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        private String name;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        @Autowired</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public SimpleService(@Qualifier(&quot;helloWorld&quot;) HelloWorld h, @Value(&quot;Geng&quot;) String name) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               this.hw = h;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               this.name = name;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public void sayHello(){</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               System.out.println(hw.hello() + &quot;, &quot; + name);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Repository   --dao</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Controll     --action</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Component    --normal</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">动态代理</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public class LogProxy implements InvocationHandler {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        private LogProxy(){};</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        // 被代理对象</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        private Object target;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        private static Object result;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        // 创建一个方法生成代理对象</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public static Object getInstance(Object o) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               LogProxy proxy = new LogProxy();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               proxy.target = o;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               Object result = Proxy.newProxyInstance(o.getClass().getClassLoader(), o.getClass().getInterfaces(), proxy);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               LogProxy.result = result;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               return result;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        // 得到的代理对象不管调什么方法，都会调invoke方法了</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        @Override</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public Object invoke(Object arg0, Method method, Object[] arg2) throws Throwable {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               if(method.isAnnotationPresent(LogInfo.class)) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       new Logger().info(method.getAnnotation(LogInfo.class).value());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               System.out.println(arg0==LogProxy.result);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               Object obj = method.invoke(target, arg2);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               return obj;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean name=&quot;userDynamicDao&quot; class=&quot;org.zttc.itat.spring.util.LogProxy&quot; factory-method=&quot;getInstance&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">       &lt;constructor-arg ref=&quot;userDao&quot;/&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Retention(RetentionPolicy.RUNTIME)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public @interface LogInfo {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public String value() default &quot;&quot;;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">spring aop</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">     xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context/spring-context-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/aop</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   &lt;context:annotation-config/&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   &lt;context:component-scan base-package=&quot;org.zttc.itat.spring&quot;&gt;&lt;/context:component-scan&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   &lt;aop:aspectj-autoproxy /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/beans&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Component(&quot;logAsp&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Aspect</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public class LogAspect {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        @Before(value=&quot;execution(* org.zttc.itat.spring.dao.*.add*(..)) || execution(* org.zttc.itat.spring.dao.*.delete*(..))&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public void logStart(JoinPoint jp) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               Method[] ms = jp.getTarget().getClass().getMethods();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            String methodName = jp.getSignature().getName();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            for(Method m:ms) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                if(methodName.equals(m.getName())) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       if(m.isAnnotationPresent(LogInfo.class)) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                               new Logger().info(m.getAnnotation(LogInfo.class).value());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Around(value=&quot;execution(* org.zttc.itat.spring.dao.*.add*(..)) || execution(* org.zttc.itat.spring.dao.*.delete*(..))&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public void logAround(ProceedingJoinPoint jp) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        new Logger().info(&quot;Start...&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        try {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               jp.proceed(jp.getArgs());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        } catch (Throwable e) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               // TODO Auto-generated catch block</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               e.printStackTrace();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        new Logger().info(&quot;End...&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@After(value=&quot;execution(* org.zttc.itat.spring.service.*.add*(..)) &amp;&amp; args(num)&quot;,argNames=&quot;num&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public void logEnd2(JoinPoint jp, int num) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        new Logger().info(&quot;Done! Arg=&quot; + num);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">-----------------------------------------------------------------------------------------------------------------------------</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">xml config</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;aop:config&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:pointcut expression=&quot;execution(* com.fansy.service.impl.Stock*.fetch*(..))&quot; id=&quot;datePointCut&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:pointcut expression=&quot;execution(* com.fansy.service.impl.Stock*.fetch*(..)) &amp;amp;&amp;amp; args(code)&quot; id=&quot;datePointCut2&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:advisor advice-ref=&quot;warnInterceptor&quot; pointcut-ref=&quot;datePointCut&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:aspect id=&quot;simpleDateAspect&quot; ref=&quot;dateAspect&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;aop:around method=&quot;beforeFecth&quot; arg-names=&quot;code&quot; pointcut-ref=&quot;datePointCut2&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/aop:aspect&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/aop:config&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">advice</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Component(&quot;warnInterceptor&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public class WarnInterceptor implements MethodInterceptor {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        @Override</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public Object invoke(MethodInvocation invoke) throws Throwable {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               String code = (String)invoke.getArguments()[0];</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               if(code!=null &amp;&amp; code.startsWith(&quot;600&quot;)) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       System.out.println(&quot;Shanghai code: &quot; + code);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               Object obj = invoke.proceed();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               if(obj!=null) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       Stock stk = (Stock)obj;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       System.out.println(&quot;Stock: &quot; + stk.getName() + &quot; fetch successfully!&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               return obj;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">aspect</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public Object beforeFecth(ProceedingJoinPoint jp, String code) throws Throwable {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        SimpleDateFormat sd = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        System.out.println(&quot;Fetch stock &quot; + code + &quot; @ &quot; + sd.format(new Date()));</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        Object object = jp.proceed(jp.getArgs());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        if(object!=null) {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               mashall(object,Stock.class);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        return object;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">auto advice</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;!-- Auto apply advisors, notice the use of prefix. --&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    &lt;property name=&quot;advisorBeanNamePrefix&quot; value=&quot;config&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    &lt;property name=&quot;usePrefix&quot; value=&quot;true&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;bean id=&quot;configCdrCacheAdvisor&quot; class=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;advice&quot; ref=&quot;cdrCacheInterceptor&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;property name=&quot;patterns&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;list&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;com.covisint.healthcare.cdr.CdrConfigService*.*fetch.*&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;com.covisint.healthcare.cdr.CdrConfigSourceMapService*.*fetch.*&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;com.covisint.healthcare.cdr.CDAGeneratorServiceMirth*.*get.*&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;com.covisint.healthcare.cdr.CdrRetrievalService*.*fetch.*&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;/list&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/property&gt;   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">another way</font></font></div><div align="left"><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">        </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">bean</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">&quot;communityPatientService&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">class</span></font><font face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt; background:#e8f2fe">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;proxyInterfaces&quot;&gt;&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">value</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font><font face="Consolas" size="1"><span style="font-size:9pt">com.covisint.cep.healthcare.patient.CommunityPatientService</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;/</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">value</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;&lt;/</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">           </span></font> <font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;target&quot;&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                              </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">bean</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">id</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;communityPatientServiceTarget&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">class</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;com.covisint.cep.healthcare.patient.CommunityPatientServiceImpl&quot;&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                                      </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;communityManageService&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">ref</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;communityManageService&quot;</span></font> <font face="Consolas" size="1"><span style="font-size:9pt">/</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                                      </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;communityPatientMergeHelperService&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">ref</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;communityPatientMergeHelperService&quot;</span></font> <font face="Consolas" size="1"><span style="font-size:9pt">/</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                                      </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;mpiSourceTradingPartnerMapDao&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">ref</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;mpiSourceTradingPartnerMapDao&quot;</span></font><font face="Consolas" size="1"><span style="font-size:9pt">/</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                                      </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;referenceServiceUpdateDao&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">ref</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;referenceServiceUpdateDao&quot;</span></font><font face="Consolas" size="1"><span style="font-size:9pt">/</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                                      </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">name</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;mpiConfigService&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:9pt">ref</span></font><font face="Consolas" size="1"><span style="font-size:9pt"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&quot;mpiConfigService&quot;</span></font> <font face="Consolas" size="1"><span style="font-size:9pt">/</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">                              </span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;/</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">bean</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font><font face="Consolas" size="1"><span style="font-size:9pt">           </span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">           </span></font> <font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;/</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">property</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">           </span></font> <font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">&lt;!--</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">            &lt;property name=&quot;interceptorNames&quot;&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                    &lt;list&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                              &lt;value&gt;manualProxyCommunitySecurityCheckAdvisor&lt;/value&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                            &lt;value&gt;manualProxyCommunityPatientService</span><span style="font-size:9pt; background:#99b5d9">AuditAdvisor</span><span style="font-size:9pt">&lt;/value&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                            &lt;value&gt;manualProxyCommunityProcessorAdvisor&lt;/value&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                            &lt;value&gt;manualProxyMpiCacheAdvisor&lt;/value&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                                                     &lt;value&gt;manualProxyPerformanceLoggingAdvisor&lt;/value&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">                    &lt;/list&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">        &lt;/property&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#008000" face="Consolas" size="1"><span style="font-size:9pt">        --&gt;</span></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font face="Consolas" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&lt;/</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:9pt">bean</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:9pt">&gt;</span></font></font></font></div></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">----------------------------------------------------------------------------------------------------</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">spring jdbc</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/aop</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;context:annotation-config /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;context:component-scan base-package=&quot;org.zttc.itat&quot;&gt;&lt;/context:component-scan&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:aspectj-autoproxy /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;context:property-placeholder location=&quot;jdbc.properties&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               destroy-method=&quot;close&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;driverClassName&quot; value=&quot;${jdbc.driverClassName}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;constructor-arg ref=&quot;dataSource&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;!--</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;oracleSeq&quot; class=&quot;org.springframework.jdbc.support.incrementer.OracleSequenceMaxValueIncrementer&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">           &lt;constructor-arg index=&quot;0&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">           &lt;constructor-arg index=&quot;1&quot; value=&quot;SEQ_USERID&quot;&gt;&lt;/constructor-arg&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;cdrdao&quot; class=&quot;org.zttc.itat.dao.CDRUpdateDaoImpl&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">           &lt;property name=&quot;jdbcTemplate&quot; ref=&quot;jdbcTemplate&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        --&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/beans&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">@Repository(&quot;userDao&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public class UserDaoImpl implements IUserDao</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">{</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    private JdbcTemplate jdbcTemplate;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    private AbstractSequenceMaxValueIncrementer seq;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    @Override</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public User add(User user)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        String sql = &quot;insert into T_USER(ID,USERNAME,PASSWORD,NICKNAME) VALUES(?,?,?,?)&quot;;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        user.setId(seq.nextIntValue());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        jdbcTemplate.update(sql, new Object[]{user.getId(),user.getName(),user.getPassword(),user.getNickName()});</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        return user;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    @Override</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public List&lt;User&gt; list()</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        String sql = &quot;select * from T_USER&quot;;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        List&lt;User&gt; userLst = jdbcTemplate.query(sql, new Object[]{}, new UserRowMapper());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        return userLst;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    @Resource(name=&quot;jdbcTemplate&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public void setJdbcTemplate(JdbcTemplate jdbcTemplate)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        this.jdbcTemplate = jdbcTemplate;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    @Resource(name=&quot;oracleSeq&quot;)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public void setSeq(AbstractSequenceMaxValueIncrementer seq)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        this.seq = seq;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    private static class UserRowMapper implements RowMapper&lt;User&gt; {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        public User mapRow(ResultSet p, int paramInt) throws SQLException</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            User u = new User();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            u.setId(p.getInt(&quot;ID&quot;));</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            u.setName(p.getString(&quot;USERNAME&quot;));</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            u.setNickName(p.getString(&quot;NICKNAME&quot;));</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            u.setPassword(p.getString(&quot;PASSWORD&quot;));</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">            return u;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        }       </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//***********************************************//</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">public class CDRUpdateDaoImpl</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">{</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    private JdbcTemplate jdbcTemplate;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    //private AbstractSequenceMaxValueIncrementer seq;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public void insertRecord1() {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        Date dt = new Date();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        SimpleDateFormat dateFormatter = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm:ss z&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        String strDate = dateFormatter.format(dt);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        System.out.println(strDate);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        String ADD_PATIENT_CDR_UPDATE_EVENT = &quot;INSERT INTO PATIENT_CDR_UPDATE_EVENT (EVENT_KEY, PATIENT_ID, SOURCE_ID, UPDATE_DATE, CREATED_DATE, COMMUNITY_KEY) VALUES(?,?,?,?,?,?)&quot;;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">       </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        List&lt;Object&gt; argList = new ArrayList&lt;Object&gt;();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(&quot;123&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(&quot;new date&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(&quot;test&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(dt);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(dt);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(001);       </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        jdbcTemplate.update(ADD_PATIENT_CDR_UPDATE_EVENT, argList.toArray());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">   </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public void insertRecord2() {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        Date dt = new Date();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        SimpleDateFormat dateFormatter = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm:ss z&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        String strDate = dateFormatter.format(dt);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">//        System.out.println(strDate);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        String ADD_PATIENT_CDR_UPDATE_EVENT = &quot;INSERT INTO PATIENT_CDR_UPDATE_EVENT (EVENT_KEY, PATIENT_ID, SOURCE_ID, UPDATE_DATE, CREATED_DATE, COMMUNITY_KEY) VALUES(?,?,?,SYSDATE,SYSDATE,?)&quot;;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">       </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        List&lt;Object&gt; argList = new ArrayList&lt;Object&gt;();</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(&quot;124&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(&quot;sys date&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(&quot;test&quot;);</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        argList.add(002);       </font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        jdbcTemplate.update(ADD_PATIENT_CDR_UPDATE_EVENT, argList.toArray());</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    public void setJdbcTemplate(JdbcTemplate jdbcTemplate)</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    {</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        this.jdbcTemplate = jdbcTemplate;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">    }</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">}</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">-----------------------------------------------------------------------------------------------------</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">spring - hibernate</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/aop</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/context/spring-context-3.0.xsd</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/tx</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">         http://www.springframework.org/schema/tx/spring-tx-3.0.xsd&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;context:annotation-config /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;context:component-scan base-package=&quot;org.zttc.itat&quot;&gt;&lt;/context:component-scan&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:aspectj-autoproxy /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;context:property-placeholder location=&quot;jdbc.properties&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;driverClassName&quot; value=&quot;${jdbc.driverClassName}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;!-- &lt;property name=&quot;mappingResources&quot;&gt; &lt;list&gt; &lt;value&gt;product.hbm.xml&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; --&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;packagesToScan&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;value&gt;org.zttc.itat.model&lt;/value&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;hibernateProperties&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;props&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                              &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                              &lt;prop key=&quot;show_sql&quot;&gt;true&lt;/prop&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                              &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                              &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;/props&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;/property&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;bean id=&quot;txManager&quot; class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/bean&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;aop:config&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;aop:pointcut id=&quot;allMethods&quot; expression=&quot;execution(* org.zttc.itat.dao.*.*(..))&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;allMethods&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/aop:config&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;tx:attributes&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">                       &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot; /&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;/tx:attributes&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/tx:advice&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/beans&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;tx:annotation-driven transaction-manager=&quot;hcTransactionManager&quot;/&gt;</font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><div align="left"><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;!-- 配置哪些方法要加入事务控制 --&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txManager&quot;&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;tx:attributes&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;!-- 让所有的方法都加入事务管理，为了提高效率，可以把一些查询之类的方法设置为只读的事务 --&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot;/&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;!-- 以下方法都是可能设计修改的方法，就无法设置为只读 --&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;tx:method name=&quot;add*&quot; propagation=&quot;REQUIRED&quot;/&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;tx:method name=&quot;del*&quot; propagation=&quot;REQUIRED&quot;/&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot;/&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">               &lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot;/&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">        &lt;/tx:attributes&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">&lt;/tx:advice&gt;</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><br></font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">----------------------------------------------------------------------------------------------------------</font></font></font></div><div align="left"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas"><font color="#010101" face="Consolas">spring mvc</font></font></font></div></div></div></div></div></div><div align="left"><div align="left"><div align="left"><font face="Consolas"><font face="Consolas"><font color="#008080" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><br></span></font></font></font></div></div></div><div><font face="Consolas">web.xml</font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas">&lt;?</font><font color="#3F7F7F" face="Consolas">xml</font> <font color="#7F007F" face="Consolas">version</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;1.0&quot;</i></font> <font color="#7F007F" face="Consolas">encoding</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;UTF-8&quot;</i></font><font color="#008080" face="Consolas">?&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">web-app</font> <font color="#7F007F" face="Consolas">version</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;2.4&quot;</i></font> <font color="#7F007F" face="Consolas">xmlns</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;http://java.sun.com/xml/ns/j2ee&quot;</i></font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas">   </font> <font color="#7F007F" face="Consolas">xmlns:xsi</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</i></font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas">   </font> <font color="#7F007F" face="Consolas">xsi:schemaLocation</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;http://java.sun.com/xml/ns/j2ee</i></font></font></div><div align="left"><font face="Consolas"><font color="#2A00FF" face="Consolas"><i>    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</i></font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">display-name</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">Learning-springMVC</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">display-name</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#3F5FBF" face="Consolas">&lt;!-- Context Configuration locations for Spring XML files --&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">context-param</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">param-name</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">contextConfigLocation</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">param-name</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">param-value</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">/WEB-INF/applicationContext*.xml</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">param-value</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">context-param</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">listener</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">listener-class</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">org.springframework.web.context.ContextLoaderListener</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">listener-class</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">listener</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">example</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-class</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">org.springframework.web.servlet.DispatcherServlet</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-class</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">load-on-startup</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">1</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">load-on-startup</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-mapping</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">example</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">url-pattern</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">/example/*</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">url-pattern</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-mapping</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">hello</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-class</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">com.fansy.servlet.SampleServlet</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-class</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-mapping</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">hello</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-name</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">url-pattern</font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">/hello</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">url-pattern</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">servlet-mapping</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#010101" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">web-app</font><font color="#008080" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">example-servlet.xml</font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><br></font></font></div><div align="left"><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&lt;</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">?</span></font><font color="#A31515" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">xml</span></font> <font color="#FF0000" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">version</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b>=</b></span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;1.0&quot;</span></font> <font color="#FF0000" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">encoding</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b>=</b></span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;UTF-8&quot;</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">?</span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&gt;</span></font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">beans</font> <font color="#FF0000" face="Consolas">xmlns</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;http://www.springframework.org/schema/beans&quot;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">   </font> <font color="#FF0000" face="Consolas">xmlns:context</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;http://www.springframework.org/schema/context&quot;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">   </font> <font color="#FF0000" face="Consolas">xmlns:mvc</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;http://www.springframework.org/schema/mvc&quot;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">   </font> <font color="#FF0000" face="Consolas">xmlns:xsi</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">   </font> <font color="#FF0000" face="Consolas">xsi:schemaLocation</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">        http://www.springframework.org/schema/beans</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">        http://www.springframework.org/schema/context</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">        http://www.springframework.org/schema/context/spring-context-3.1.xsd</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">        http://www.springframework.org/schema/mvc</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd&quot;&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">   </font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">  </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">mvc</font><font face="Consolas">:</font><font color="#A31515" face="Consolas">annotation</font><font face="Consolas">-</font><font color="#A31515" face="Consolas">driven</font> <font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">   </font></font></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">&lt;</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">mvc</span></font><font face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">:</span></font><font color="#A31515" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">resources</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">mapping</span></font><font face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">&quot;/css/**&quot;</span></font> <font color="#FF0000" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">location</span></font><font face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe"><b>=</b></span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">&quot;/css/&quot;</span></font><font face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">/</span></font><font color="#0000FF" face="Consolas" size="1"><span style="font-size:8pt; background:#e8f2fe">&gt;</span></font><span style="color: rgb(0, 0, 255); font-family: Consolas;">  </span></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">  </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">context</font><font face="Consolas">:</font><font color="#A31515" face="Consolas">component</font><font face="Consolas">-</font><font color="#A31515" face="Consolas">scan</font> <font color="#FF0000" face="Consolas">base-package</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;com.fansy.controller&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">  </font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">  </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">bean</font> <font color="#FF0000" face="Consolas">id</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;mappingJacksonJsonView&quot;</font> <font color="#FF0000" face="Consolas">class</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;org.springframework.web.servlet.view.json.MappingJacksonJsonView&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">      </font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">  </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">bean</font> <font color="#FF0000" face="Consolas">id</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;viewResolver&quot;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">     </font> <font color="#FF0000" face="Consolas">class</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">           </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">property</font> <font color="#FF0000" face="Consolas">name</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;prefix&quot;</font> <font color="#FF0000" face="Consolas">value</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;/WEB-INF/jsp/&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">           </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">property</font> <font color="#FF0000" face="Consolas">name</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;suffix&quot;</font> <font color="#FF0000" face="Consolas">value</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;.jsp&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas">   </font> <font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">bean</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font face="Consolas"> </font></font></font></div><div align="left"><font face="Consolas"><font color="#008080" face="Consolas"><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">beans</font><font color="#0000FF" face="Consolas">&gt;</font></font></font></div></div><div><font face="Consolas"><br></font></div><div align="left"><font face="Consolas"><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">    </span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&lt;</span></font><font color="#A31515" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">bean</span></font> <font color="#FF0000" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">id</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b>=</b></span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;urlMapping&quot;</span></font> <font color="#FF0000" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">class</span></font><font face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;"><b>=</b></span></font><font color="#0000FF" face="Consolas"><span style="background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(232, 242, 254); background-position: initial initial; background-repeat: initial initial;">&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;</span></font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">property</font> <font color="#FF0000" face="Consolas">name</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;mappings&quot;&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">           </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">props</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">               </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">prop</font> <font color="#FF0000" face="Consolas">key</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;/cdrRegistration.ajax&quot;&gt;</font><font face="Consolas">cdrRegistrationController</font><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">prop</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">               </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">prop</font> <font color="#FF0000" face="Consolas">key</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;/mirthVisibility.ajax&quot;&gt;</font><font face="Consolas">mirthVisibilityController</font><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">prop</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">               </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">prop</font> <font color="#FF0000" face="Consolas">key</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;/directUtility.ajax&quot;&gt;</font><font face="Consolas">directUtilityController</font><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">prop</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">                       </font><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">props</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">property</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">       </font> <font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">property</font> <font color="#FF0000" face="Consolas">name</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;interceptors&quot;&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">                       </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">list</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">                              </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">ref</font> <font color="#FF0000" face="Consolas">bean</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;servletCommonInterceptor&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">                              </font><font color="#0000FF" face="Consolas">&lt;</font><font color="#A31515" face="Consolas">ref</font> <font color="#FF0000" face="Consolas">bean</font><font face="Consolas"><b>=</b></font><font color="#0000FF" face="Consolas">&quot;cuidInterceptor&quot;</font><font face="Consolas">/</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">                       </font><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">list</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">               </font><font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">property</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font face="Consolas">   </font> <font color="#0000FF" face="Consolas">&lt;/</font><font color="#A31515" face="Consolas">bean</font><font color="#0000FF" face="Consolas">&gt;</font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><br></font></font></div><div align="left"><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">    </font><font color="#646464" face="Consolas">@RequestMapping</font><font face="Consolas">(value=</font> <font color="#2A00FF" face="Consolas">&quot;/restful&quot;</font><font face="Consolas">)</font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">   </font> <font color="#7F0055" face="Consolas"><b>public</b></font> <font color="#646464" face="Consolas">@ResponseBody</font> <font face="Consolas">User getUser(</font><font color="#646464" face="Consolas">@RequestParam</font><font face="Consolas">(value=</font><font color="#2A00FF" face="Consolas">&quot;name&quot;</font><font face="Consolas">, required=</font><font color="#7F0055" face="Consolas"><b>false</b></font><font face="Consolas">) String name) {</font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">        System.</font><font color="#0000C0" face="Consolas"><i>out</i></font><font face="Consolas">.println(</font><font color="#2A00FF" face="Consolas">&quot;in restful function&quot;</font><font face="Consolas">);</font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">        User u =</font> <font color="#0000C0" face="Consolas"><i>users</i></font><font face="Consolas">.get(name);</font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">       </font> <font color="#7F0055" face="Consolas"><b>return</b></font> <font face="Consolas">u;      </font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">    }</font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas"><br></font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><font face="Consolas">REST Style</font></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas">user_show?id=120 -&gt;user/120</font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas">user_delete?id=120 -&gt; user/120/delete</font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas">user_update?id=120 -&gt; user/120/update</font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas">user_list -&gt; /users or /user/users</font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas">GET,POST,PUT,DELETE</font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas"><br></font></font></div><div align="left"><font face="Consolas"><font color="#0000FF" face="Consolas">一个资源可以映射多个视图</font></font></div></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font color="#2A00FF"><span style="font-size: 11px;"><span style="border-collapse: separate; color: rgb(0, 0, 0); font-family: Tahoma; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; font-size: medium;"><span style="font-family: Consolas; text-align: -webkit-left;"><br></span></span></span></font></div></div></div></div></div></div></div></div>
</div></body></html> 